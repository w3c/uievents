<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Composition Events</title>
  <meta content="ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
  <meta content="Bikeshed version 3383f409d, updated Fri Apr 28 15:49:22 2023 -0700" name="generator">
  <link href="https://www.w3.org/TR/uievents/" rel="canonical">
  <meta content="d564b58c632a2327410887f551d69b8d8daf9639" name="document-revision">
<style>/* style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}
</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}
</style>
<style>/* style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    white-space: pre;
    display: inline-block;
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled[role="button"] { cursor: pointer; }
</style>
<style>/* style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1>Composition Events</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="2024-01-24">24 January 2024</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/uievents/">https://w3c.github.io/uievents/</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/uievents/">https://www.w3.org/TR/uievents/</a>
      <dt>Feedback:
      <dd><a href="https://github.com/w3c/uievents/issues/">GitHub</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="59482"><a class="p-name fn u-email email" href="mailto:garykac@google.com">Gary Kacmarcik</a> (<span class="p-org org">Google</span>)
      <dd class="editor p-author h-card vcard" data-editor-id="40117"><a class="p-name fn u-email email" href="mailto:travil@microsoft.com">Travis Leithead</a> (<span class="p-org org">Microsoft</span>)
      <dt class="editor">Former Editor:
      <dd class="editor p-author h-card vcard"><span class="p-name fn">Doug Schepers</span> (<span class="p-org org">Mar 2008 - May 2011</span>)
      <dt>Tests:
      <dd><a href="https://github.com/web-platform-tests/wpt/tree/master/uievents">web-platform-tests uievents/</a> (<a href="https://github.com/web-platform-tests/wpt/labels/uievents">ongoing work</a>)
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2024 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>*** Composition Events ***</p>
   <p class="replace-with-note-class"><span class="marker">Note:</span> This is an experimental split of the UI Events spec into smaller, event-specific

	specs. The split was made from an out-of-date snapshot, so the information here is not
	current, so please focus on the overall structure rather than the specifics of the
	content. If this experiment goes well, then we will split the current spec after all
	outstanding pull requests have been handled.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at https://www.w3.org/TR/.</em> </p>
   <p> This document was published by the <a href="https://www.w3.org/groups/wg/webapps">Web Applications Working Group</a> as an Editors Draft. This document is intended to become a W3C Recommendation. </p>
   <p></p>
   <p> This document was published by the <a href="https://www.w3.org/groups/wg/webapps">Web Applications Working Group</a> as a Working Draft.

    Feedback and comments on this specification are welcome. Please use <a href="https://github.com/w3c/uievents/issues">GitHub issues</a> Historical discussions can be found in the <a href="https://lists.w3.org/Archives/Public/public-webapps/">public-webapps@w3.org archives</a>. </p>
   <p> Publication as an Editors Draft does not imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. This is a draft document and may
    be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite
    this document as other than work in progress. </p>
   <p> This document was produced by a group operating under the <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="https://www.w3.org/2004/01/pp-impl/114929/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20200915/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. </p>
   <p>This document is governed by the <a href="https://www.w3.org/2021/Process-20211102/" id="w3c_process_revision">2 November 2021 W3C Process Document</a>. </p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#spec-intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#spec-overview"><span class="secno">1.1</span> <span class="content">Overview</span></a>
      <li><a href="#spec-conformance"><span class="secno">1.2</span> <span class="content">Conformance</span></a>
     </ol>
    <li><a href="#style-conventions"><span class="secno">2</span> <span class="content">Stylistic Conventions</span></a>
    <li>
     <a href="#events-compositionevents"><span class="secno">3</span> <span class="content">Composition Events</span></a>
     <ol class="toc">
      <li>
       <a href="#interface-compositionevent"><span class="secno">3.1</span> <span class="content">Interface CompositionEvent</span></a>
       <ol class="toc">
        <li><a href="#idl-compositionevent"><span class="secno">3.1.1</span> <span class="content">CompositionEvent</span></a>
        <li><a href="#idl-compositioneventinit"><span class="secno">3.1.2</span> <span class="content">CompositionEventInit</span></a>
       </ol>
      <li><a href="#events-composition-order"><span class="secno">3.2</span> <span class="content">Composition Event Order</span></a>
      <li><a href="#events-composition-handwriting"><span class="secno">3.3</span> <span class="content">Handwriting Recognition Systems</span></a>
      <li><a href="#events-composition-canceling"><span class="secno">3.4</span> <span class="content">Canceling Composition Events</span></a>
      <li><a href="#events-composition-key-events"><span class="secno">3.5</span> <span class="content">Key Events During Composition</span></a>
      <li><a href="#events-composition-input-events"><span class="secno">3.6</span> <span class="content">Input Events During Composition</span></a>
      <li>
       <a href="#events-composition-types"><span class="secno">3.7</span> <span class="content">Composition Event Types</span></a>
       <ol class="toc">
        <li><a href="#event-type-compositionstart"><span class="secno">3.7.1</span> <span class="content"><span>compositionstart</span></span></a>
        <li><a href="#event-type-compositionupdate"><span class="secno">3.7.2</span> <span class="content"><span>compositionupdate</span></span></a>
        <li><a href="#event-type-compositionend"><span class="secno">3.7.3</span> <span class="content"><span>compositionend</span></span></a>
       </ol>
     </ol>
    <li>
     <a href="#legacy-event-initializers"><span class="secno">4</span> <span class="content">Legacy Event Initializers</span></a>
     <ol class="toc">
      <li><a href="#idl-interface-CompositionEvent-initializers"><span class="secno">4.1</span> <span class="content">Initializers for interface CompositionEvent</span></a>
     </ol>
    <li><a href="#security-considerations"><span class="secno">5</span> <span class="content">Security Considerations</span></a>
    <li><a href="#acknowledgements-contributors"><span class="secno">6</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#other-uievents"><span class="secno">7</span> <span class="content">Refs to other UIEvent specs [DELETE]</span></a>
     <ol class="toc">
      <li>
       <a href="#things"><span class="secno">7.1</span> <span class="content">Things defined in other sections</span></a>
       <ol class="toc">
        <li><a href="#event-flow-activation"><span class="secno">7.1.1</span> <span class="content">Activation triggers and behavior</span></a>
        <li><a href="#event-flow-default-cancel"><span class="secno">7.1.2</span> <span class="content">Default actions and cancelable events</span></a>
        <li><a href="#event-flow"><span class="secno">7.1.3</span> <span class="content">Event dispatch and DOM event flow</span></a>
        <li><a href="#conf-interactive-ua"><span class="secno">7.1.4</span> <span class="content">Web browsers and other dynamic or interactive <span>user agents</span></span></a>
        <li><a href="#conf-author-tools"><span class="secno">7.1.5</span> <span class="content">Authoring tools</span></a>
       </ol>
      <li>
       <a href="#keyboardevent-things"><span class="secno">7.2</span> <span class="content">Things defined in KeyboardEvents</span></a>
       <ol class="toc">
        <li><a href="#keys"><span class="secno">7.2.1</span> <span class="content">Keyboard events and key values</span></a>
        <li><a href="#keys-IME"><span class="secno">7.2.2</span> <span class="content">Input Method Editors</span></a>
        <li><a href="#key-legends"><span class="secno">7.2.3</span> <span class="content">Key Legends</span></a>
       </ol>
      <li>
       <a href="#changes-things"><span class="secno">7.3</span> <span class="content">Things defined in Changes</span></a>
       <ol class="toc">
        <li><a href="#changes-drafts"><span class="secno">7.3.1</span> <span class="content">Changes between different drafts of UI Events</span></a>
       </ol>
     </ol>
    <li><a href="#glossary"><span class="secno">8</span> <span class="content">Glossary [DELETE]</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#w3c-conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="spec-intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#spec-intro"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="spec-overview"><span class="secno">1.1. </span><span class="content">Overview</span><a class="self-link" href="#spec-overview"></a></h3>
   <p>TODO.</p>
   <h3 class="heading settled" data-level="1.2" id="spec-conformance"><span class="secno">1.2. </span><span class="content">Conformance</span><a class="self-link" href="#spec-conformance"></a></h3>
   <p>Boilerplate?</p>
   <h2 class="heading settled" data-level="2" id="style-conventions"><span class="secno">2. </span><span class="content">Stylistic Conventions</span><a class="self-link" href="#style-conventions"></a></h2>
   <p>This specification follows the <a href="http://www.w3.org/People/Schepers/spec-conventions.html">Proposed W3C Specification Conventions</a>,
with the following supplemental additions:</p>
   <ul>
    <li data-md>
     <p>The <a href="#key-legends"><em>key cap</em></a> printed on a key is shown as <code class="keycap">↓</code>, <code class="keycap">=</code> or <code class="keycap">Q</code>. This is used to refer to a
key from the user’s perspective without regard for the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-keyboardevent-key" id="ref-for-dom-keyboardevent-key">key</a></code> and <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-keyboardevent-code" id="ref-for-dom-keyboardevent-code">code</a></code> values in the
generated <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#keyboardevent" id="ref-for-keyboardevent">KeyboardEvent</a></code>.</p>
    <li data-md>
     <p>Glyphs representing character are shown as: <code class="glyph">"𣧂"</code>.</p>
    <li data-md>
     <p>Unicode character encodings are shown as: <code class="unicode">U+003d</code>.</p>
    <li data-md>
     <p>Names of key values generated by a key press (i.e., the value of <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#keyboardevent" id="ref-for-keyboardevent①">KeyboardEvent</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-keyboardevent-key" id="ref-for-dom-keyboardevent-key①">key</a></code>) are shown as: <code class="key">"<a href="http://www.w3.org/TR/uievents-key/#key-ArrowDown">ArrowDown</a>"</code>, <code class="key">"="</code>, <code class="key">"q"</code> or <code class="key">"Q"</code>.</p>
    <li data-md>
     <p>Names of key codes associated with the physical keys (i.e., the
value of <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#keyboardevent" id="ref-for-keyboardevent②">KeyboardEvent</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-keyboardevent-code" id="ref-for-dom-keyboardevent-code①">code</a></code>) are shown as: <code class="code">"<a href="http://www.w3.org/TR/uievents-code/#code-ArrowDown">ArrowDown</a>"</code>, <code class="code">"<a href="http://www.w3.org/TR/uievents-code/#code-Equal">Equal</a>"</code> or <code class="code">"<a href="http://www.w3.org/TR/uievents-code/#code-KeyQ">KeyQ</a>"</code>.</p>
   </ul>
   <p>In addition, certain terms are used in this specification with particular
meanings.  The term <q>implementation</q> applies to a browser, content
authoring tool, or other <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent">user agent</a> that implements this specification,
while a content author is a person who writes script or code that takes
advantage of the interfaces, methods, attributes, events, and other features
described in this specification in order to make Web applications, and a user is
the person who uses those Web applications in an implementation.</p>
   <p>And finally:</p>
   <p class="note" role="note">This is a note.</p>
   <p class="XXX">This is an open issue.</p>
   <p class="warning">This is a warning.</p>
<pre class="idl-ignore" data-highlight="webidl" data-no-idl>interface <b>Example</b> {
    // This is an IDL definition.
};
</pre>
   <h2 class="heading settled" data-level="3" id="events-compositionevents"><span class="secno">3. </span><span class="content">Composition Events</span><a class="self-link" href="#events-compositionevents"></a></h2>
   <p>Composition Events provide a means for inputing text in a supplementary or
	alternate manner than by Keyboard Events, in order to allow the use of
	characters that might not be commonly available on keyboard. For example,
	Composition Events might be used to add accents to characters despite their
	absence from standard US keyboards, to build up logograms of many Asian
	languages from their base components or categories, to select word choices
	from a combination of key presses on a mobile device keyboard, or to convert
	voice commands into text using a speech recognition processor. Refer to <a href="#keys">§ 7.2.1 Keyboard events and key values</a> for examples on how Composition Events are used in combination
	with keyboard events.</p>
   <p>Conceptually, a composition session consists of one <a data-link-type="dfn" href="#compositionstart" id="ref-for-compositionstart"><code>compositionstart</code></a> event, one or more <a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate"><code>compositionupdate</code></a> events, and one <a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend"><code>compositionend</code></a> event, with the value of the <code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data">data</a></code> attribute persisting between each <q>stage</q> of this event chain during
	each session.</p>
   <p class="note" role="note"><strong>Note:</strong> While a composition session is active, keyboard events can be dispatched to
	the DOM if the keyboard is the input device used with the composition
	session. See the <a data-link-type="dfn" href="#compositionstart" id="ref-for-compositionstart①"><code>compositionstart</code></a> event details and <a href="#keys-IME">IME section</a> for relevent event ordering. </p>
   <p>Not all <a data-link-type="dfn" href="#ime" id="ref-for-ime">IME</a> systems or devices expose the necessary data to the DOM,
	so the active composition string (the <q>Reading Window</q> or <q>candidate
	selection menu option</q>) might not be available through this interface, in
	which case the selection MAY be represented by the <a data-link-type="dfn" href="#empty-string" id="ref-for-empty-string">empty string</a>.</p>
   <h3 class="heading settled" data-level="3.1" id="interface-compositionevent"><span class="secno">3.1. </span><span class="content">Interface CompositionEvent</span><a class="self-link" href="#interface-compositionevent"></a></h3>
   <p class="intro-dom">Introduced in this specification</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent">CompositionEvent</a></code> interface provides specific contextual
		information associated with Composition Events.</p>
   <p>To create an instance of the <code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent①">CompositionEvent</a></code> interface,
		use the <code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent②">CompositionEvent</a></code> constructor, passing an optional <code class="idl"><a data-link-type="idl" href="#dictdef-compositioneventinit" id="ref-for-dictdef-compositioneventinit">CompositionEventInit</a></code> dictionary.</p>
   <h4 class="heading settled" data-level="3.1.1" id="idl-compositionevent"><span class="secno">3.1.1. </span><span class="content">CompositionEvent</span><a class="self-link" href="#idl-compositionevent"></a></h4>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="compositionevent"><code><c- g>CompositionEvent</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/uievents/#uievent" id="ref-for-uievent"><c- n>UIEvent</c-></a> {
  <dfn class="idl-code" data-dfn-for="CompositionEvent" data-dfn-type="constructor" data-export data-lt="CompositionEvent(type, eventInitDict)|constructor(type, eventInitDict)|CompositionEvent(type)|constructor(type)" id="dom-compositionevent-compositionevent"><code><c- g>constructor</c-></code><a class="self-link" href="#dom-compositionevent-compositionevent"></a></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="CompositionEvent/CompositionEvent(type, eventInitDict), CompositionEvent/constructor(type, eventInitDict), CompositionEvent/CompositionEvent(type), CompositionEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-compositionevent-compositionevent-type-eventinitdict-type"><code><c- g>type</c-></code><a class="self-link" href="#dom-compositionevent-compositionevent-type-eventinitdict-type"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-compositioneventinit" id="ref-for-dictdef-compositioneventinit①"><c- n>CompositionEventInit</c-></a> <dfn class="idl-code" data-dfn-for="CompositionEvent/CompositionEvent(type, eventInitDict), CompositionEvent/constructor(type, eventInitDict), CompositionEvent/CompositionEvent(type), CompositionEvent/constructor(type)" data-dfn-type="argument" data-export id="dom-compositionevent-compositionevent-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code><a class="self-link" href="#dom-compositionevent-compositionevent-type-eventinitdict-eventinitdict"></a></dfn> = {});
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data①"><c- g>data</c-></a>;
};
</pre>
   <dl>
    <dt><dfn class="dfn-paneled idl-code" data-dfn-for="CompositionEvent" data-dfn-type="attribute" data-export id="dom-compositionevent-data"><code>data</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①">USVString</a>, readonly</span>
    <dd>
      <code>data</code> holds the value of the characters generated by
					an input method. This MAY be a single Unicode character or a
					non-empty sequence of Unicode characters <a data-link-type="biblio" href="#biblio-unicode" title="The Unicode Standard">[Unicode]</a>. Characters
					SHOULD be normalized as defined by the Unicode normalization
					form <em>NFC</em>, defined in <a data-link-type="biblio" href="#biblio-uax15" title="Unicode Normalization Forms">[UAX15]</a>. This
					attribute MAY be the <a data-link-type="dfn" href="#empty-string" id="ref-for-empty-string①">empty string</a>. 
     <p>The <a data-link-type="dfn" href="#un-initialized-value" id="ref-for-un-initialized-value">un-initialized value</a> of this attribute MUST be <code>""</code> (the empty string).</p>
   </dl>
   <h4 class="heading settled" data-level="3.1.2" id="idl-compositioneventinit"><span class="secno">3.1.2. </span><span class="content">CompositionEventInit</span><a class="self-link" href="#idl-compositioneventinit"></a></h4>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-compositioneventinit"><code><c- g>CompositionEventInit</c-></code></dfn> : <a data-link-type="idl-name" href="https://w3c.github.io/uievents/#dictdef-uieventinit" id="ref-for-dictdef-uieventinit"><c- n>UIEventInit</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-compositioneventinit-data" id="ref-for-dom-compositioneventinit-data"><c- g>data</c-></a> = "";
};
</pre>
   <dl>
    <dt><dfn class="dfn-paneled idl-code" data-dfn-for="CompositionEventInit" data-dfn-type="dict-member" data-export id="dom-compositioneventinit-data"><code>data</code></dfn>, <span> of type <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②">DOMString</a>, defaulting to <code>""</code></span>
    <dd> Initializes the <code>data</code> attribute of the
					CompositionEvent object to the characters generated by the IME
					composition. 
   </dl>
   <h3 class="heading settled" data-level="3.2" id="events-composition-order"><span class="secno">3.2. </span><span class="content">Composition Event Order</span><a class="self-link" href="#events-composition-order"></a></h3>
   <p>The Composition Events defined in this specification MUST occur in the following set order relative to one another:</p>
   <table class="event-sequence-table">
    <thead>
     <tr>
      <td class="cell-number">
      <th>Event Type
      <th>Notes
    <tbody>
     <tr>
      <td class="cell-number">1
      <td><a data-link-type="dfn" href="#compositionstart" id="ref-for-compositionstart②"><code>compositionstart</code></a>
      <td>
     <tr>
      <td class="cell-number">2
      <td><a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate①"><code>compositionupdate</code></a>
      <td>Multiple events
     <tr>
      <td class="cell-number">3
      <td><a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend①"><code>compositionend</code></a>
      <td>
   </table>
   <h3 class="heading settled" data-level="3.3" id="events-composition-handwriting"><span class="secno">3.3. </span><span class="content">Handwriting Recognition Systems</span><a class="self-link" href="#events-composition-handwriting"></a></h3>
   <p>The following example describes a possible sequence of events when
		composing a text passage <q>text</q> with a handwriting recognition
		system, such as on a pen tablet, as modeled using Composition Events.</p>
   <table class="event-sequence-table">
    <thead>
     <tr>
      <td class="cell-number">
      <th>Event Type
      <th style="text-align:center"><code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent③">CompositionEvent</a></code><br> <code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data②">data</a></code>
      <th>Notes
    <tbody>
     <tr>
      <td class="cell-number">1
      <td><a data-link-type="dfn" href="#compositionstart" id="ref-for-compositionstart③"><code>compositionstart</code></a>
      <td style="text-align:center"><code>""</code>
      <td>
     <tr>
      <td class="cell-number">
      <td>
      <td style="text-align:center">
      <td><em>User writes word on tablet surface</em>
     <tr>
      <td class="cell-number">2
      <td><a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate②"><code>compositionupdate</code></a>
      <td style="text-align:center"><code>"test"</code>
      <td>
     <tr>
      <td class="cell-number">
      <td>
      <td style="text-align:center">
      <td><em>User rejects first word-match suggestion, selects different match</em>
     <tr>
      <td class="cell-number">3
      <td><a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate③"><code>compositionupdate</code></a>
      <td style="text-align:center"><code>"text"</code>
      <td>
     <tr>
      <td class="cell-number">4
      <td><a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend②"><code>compositionend</code></a>
      <td style="text-align:center"><code>"text"</code>
      <td>
   </table>
   <h3 class="heading settled" data-level="3.4" id="events-composition-canceling"><span class="secno">3.4. </span><span class="content">Canceling Composition Events</span><a class="self-link" href="#events-composition-canceling"></a></h3>
   <p>If a <a data-link-type="dfn" href="#keydown" id="ref-for-keydown"><code>keydown</code></a> event is canceled then any Composition Events that
		would have fired as a result of that <a data-link-type="dfn" href="#keydown" id="ref-for-keydown①"><code>keydown</code></a> SHOULD not be
		dispatched:</p>
   <table class="event-sequence-table">
    <thead>
     <tr>
      <td class="cell-number">
      <th>Event Type
      <th>Notes
    <tbody>
     <tr>
      <td class="cell-number">1
      <td><a data-link-type="dfn" href="#keydown" id="ref-for-keydown②"><code>keydown</code></a>
      <td>The <a data-link-type="dfn" href="#default-action" id="ref-for-default-action">default action</a> is prevented, e.g., by invoking <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault">preventDefault()</a></code>.
     <tr>
      <td class="cell-number">
      <td>
      <td><em>No Composition Events are dispatched</em>
     <tr>
      <td class="cell-number">2
      <td><a data-link-type="dfn" href="#keyup" id="ref-for-keyup"><code>keyup</code></a>
      <td>
   </table>
   <p>If the initial <a data-link-type="dfn" href="#compositionstart" id="ref-for-compositionstart④"><code>compositionstart</code></a> event is canceled then the text
		composition session SHOULD be terminated. Regardless of whether or not
		the composition session is terminated, the <a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend③"><code>compositionend</code></a> event
		MUST be sent.</p>
   <table class="event-sequence-table">
    <thead>
     <tr>
      <td class="cell-number">
      <th>Event Type
      <th>Notes
    <tbody>
     <tr>
      <td class="cell-number">1
      <td><a data-link-type="dfn" href="#keydown" id="ref-for-keydown③"><code>keydown</code></a>
      <td>
     <tr>
      <td class="cell-number">2
      <td><a data-link-type="dfn" href="#compositionstart" id="ref-for-compositionstart⑤"><code>compositionstart</code></a>
      <td>The <a data-link-type="dfn" href="#default-action" id="ref-for-default-action①">default action</a> is prevented, e.g., by invoking <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault①">preventDefault()</a></code>.
     <tr>
      <td class="cell-number">
      <td>
      <td><em>No Composition Events are dispatched</em>
     <tr>
      <td class="cell-number">3
      <td><a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend④"><code>compositionend</code></a>
      <td>
     <tr>
      <td class="cell-number">4
      <td><a data-link-type="dfn" href="#keyup" id="ref-for-keyup①"><code>keyup</code></a>
      <td>
   </table>
   <h3 class="heading settled" data-level="3.5" id="events-composition-key-events"><span class="secno">3.5. </span><span class="content">Key Events During Composition</span><a class="self-link" href="#events-composition-key-events"></a></h3>
   <p>During the composition session, <a data-link-type="dfn" href="#keydown" id="ref-for-keydown④"><code>keydown</code></a> and <a data-link-type="dfn" href="#keyup" id="ref-for-keyup②"><code>keyup</code></a> events
		MUST still be sent, and these events MUST have the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-keyboardevent-iscomposing" id="ref-for-dom-keyboardevent-iscomposing">isComposing</a></code> attribute set to <code>true</code>.</p>
   <table class="event-sequence-table">
    <thead>
     <tr>
      <td class="cell-number">
      <th>Event Type
      <th style="text-align:center"><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#keyboardevent" id="ref-for-keyboardevent③">KeyboardEvent</a></code><br> <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-keyboardevent-iscomposing" id="ref-for-dom-keyboardevent-iscomposing①">isComposing</a></code>
      <th>Notes
    <tbody>
     <tr>
      <td class="cell-number">1
      <td><a data-link-type="dfn" href="#keydown" id="ref-for-keydown⑤"><code>keydown</code></a>
      <td style="text-align:center">false
      <td>This is the key event that initiates the composition.
     <tr>
      <td class="cell-number">2
      <td><a data-link-type="dfn" href="#compositionstart" id="ref-for-compositionstart⑥"><code>compositionstart</code></a>
      <td style="text-align:center">
      <td>
     <tr>
      <td class="cell-number">3
      <td><a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate④"><code>compositionupdate</code></a>
      <td style="text-align:center">
      <td>
     <tr>
      <td class="cell-number">4
      <td><a data-link-type="dfn" href="#keyup" id="ref-for-keyup③"><code>keyup</code></a>
      <td style="text-align:center">true
      <td>
     <tr>
      <td class="cell-number">
      <td>...
      <td style="text-align:center">
      <td>Any key events sent during the composition session MUST have <code>isComposing</code> set to <code>true</code>.
     <tr>
      <td class="cell-number">5
      <td><a data-link-type="dfn" href="#keydown" id="ref-for-keydown⑥"><code>keydown</code></a>
      <td style="text-align:center">true
      <td>This is the key event that exits the composition.
     <tr>
      <td class="cell-number">6
      <td><a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend⑤"><code>compositionend</code></a>
      <td style="text-align:center">
      <td>
     <tr>
      <td class="cell-number">7
      <td><a data-link-type="dfn" href="#keyup" id="ref-for-keyup④"><code>keyup</code></a>
      <td style="text-align:center">false
      <td>
   </table>
   <h3 class="heading settled" data-level="3.6" id="events-composition-input-events"><span class="secno">3.6. </span><span class="content">Input Events During Composition</span><a class="self-link" href="#events-composition-input-events"></a></h3>
   <p>During the composition session, the <a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate⑤"><code>compositionupdate</code></a> MUST be
		dispatched after the <a data-link-type="dfn" href="#beforeinput" id="ref-for-beforeinput"><code>beforeinput</code></a> is sent, but before the <a data-link-type="dfn" href="#input" id="ref-for-input"><code>input</code></a> event is sent.</p>
   <table class="event-sequence-table">
    <thead>
     <tr>
      <td class="cell-number">
      <th>Event Type
      <th>Notes
    <tbody>
     <tr>
      <td class="cell-number">1
      <td><a data-link-type="dfn" href="#beforeinput" id="ref-for-beforeinput①"><code>beforeinput</code></a>
      <td>
     <tr>
      <td class="cell-number">2
      <td><a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate⑥"><code>compositionupdate</code></a>
      <td>
     <tr>
      <td class="cell-number">
      <td>
      <td><em>Any DOM updates occur at this point.</em>
     <tr>
      <td class="cell-number">3
      <td><a data-link-type="dfn" href="#input" id="ref-for-input①"><code>input</code></a>
      <td>
   </table>
   <p class="note" role="note"> Most IMEs do not support canceling updates during a composition session. </p>
   <p>The <a data-link-type="dfn" href="#beforeinput" id="ref-for-beforeinput②"><code>beforeinput</code></a> and <a data-link-type="dfn" href="#input" id="ref-for-input②"><code>input</code></a> events are sent along with the <a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate⑦"><code>compositionupdate</code></a> event whenever the DOM is updated as part of
		the composition. Since there are no DOM updates associated with the <a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend⑥"><code>compositionend</code></a> event, <a data-link-type="dfn" href="#beforeinput" id="ref-for-beforeinput③"><code>beforeinput</code></a> and <a data-link-type="dfn" href="#input" id="ref-for-input③"><code>input</code></a> events
		should not be sent at that time.</p>
   <table class="event-sequence-table">
    <thead>
     <tr>
      <td class="cell-number">
      <th>Event Type
      <th>Notes
    <tbody>
     <tr>
      <td class="cell-number">1
      <td><a data-link-type="dfn" href="#beforeinput" id="ref-for-beforeinput④"><code>beforeinput</code></a>
      <td><em> Canceling this will prevent the DOM update and the <a data-link-type="dfn" href="#input" id="ref-for-input④"><code>input</code></a> event.</em>
     <tr>
      <td class="cell-number">2
      <td><a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate⑧"><code>compositionupdate</code></a>
      <td>
     <tr>
      <td class="cell-number">
      <td>
      <td><em>Any DOM updates occur at this point.</em>
     <tr>
      <td class="cell-number">3
      <td><a data-link-type="dfn" href="#input" id="ref-for-input⑤"><code>input</code></a>
      <td><em>Sent only if the DOM was updated.</em>
     <tr>
      <td class="cell-number">4
      <td><a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend⑦"><code>compositionend</code></a>
      <td>
   </table>
   <h3 class="heading settled" data-level="3.7" id="events-composition-types"><span class="secno">3.7. </span><span class="content">Composition Event Types</span><a class="self-link" href="#events-composition-types"></a></h3>
   <h4 class="heading settled" data-level="3.7.1" id="event-type-compositionstart"><span class="secno">3.7.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compositionstart">compositionstart</dfn></span><a class="self-link" href="#event-type-compositionstart"></a></h4>
   <table class="event-definition">
    <tbody>
     <tr>
      <th>Type
      <td><strong><code>compositionstart</code></strong>
     <tr>
      <th>Interface
      <td><code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent④">CompositionEvent</a></code>
     <tr>
      <th>Sync / Async
      <td>Sync
     <tr>
      <th>Bubbles
      <td>Yes
     <tr>
      <th>Trusted Targets
      <td><code>Element</code>
     <tr>
      <th>Cancelable
      <td>Yes
     <tr>
      <th>Composed
      <td>Yes
     <tr>
      <th>Default action
      <td>Start a new composition session when a <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system">text composition system</a> is enabled
     <tr>
      <th>Context<br> (trusted events)
      <td>
       <ul>
        <li><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code>.<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target">target</a></code> : focused element processing the composition
        <li><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#uievent" id="ref-for-uievent①">UIEvent</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-uievent-view" id="ref-for-dom-uievent-view">view</a></code> : <a data-link-type="dfn" href="#window" id="ref-for-window"><code>Window</code></a>
        <li><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#uievent" id="ref-for-uievent②">UIEvent</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-uievent-detail" id="ref-for-dom-uievent-detail">detail</a></code> : <code>0</code>
        <li><code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent⑤">CompositionEvent</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data③">data</a></code> : the original string being edited, otherwise the <a data-link-type="dfn" href="#empty-string" id="ref-for-empty-string②">empty string</a>
       </ul>
   </table>
   <p>A <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent①">user agent</a> MUST dispatch this event when a <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system①">text
			composition system</a> is enabled and a new composition session is
			about to begin (or has begun, depending on the <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system②">text composition
			system</a>) in preparation for composing a passage of text. This
			event type is device-dependent, and MAY rely upon the capabilities
			of the text conversion system and how it is mapped into the
			operating system. When a keyboard is used to feed an input method
			editor, this event type is generated after a <a data-link-type="dfn" href="#keydown" id="ref-for-keydown⑦"><code>keydown</code></a> event,
			but speech or handwriting recognition systems MAY send this event
			type without keyboard events.  Some implementations MAY populate the <code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data④">data</a></code> attribute of the <a data-link-type="dfn" href="#compositionstart" id="ref-for-compositionstart⑦"><code>compositionstart</code></a> event with the text currently selected in the document (for editing
			and replacement). Otherwise, the value of the <code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data⑤">data</a></code> attribute MUST be  the <a data-link-type="dfn" href="#empty-string" id="ref-for-empty-string③">empty string</a>.</p>
   <p>This event MUST be dispatched immediately before a <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system③">text
			composition system</a> begins a new composition session, and before
			the DOM is modified due to the composition process. The default
			action of this event is for the <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system④">text composition system</a> to
			start a new composition session. If this event is canceled, the <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system⑤">text composition system</a> SHOULD discard the current
			composition session.</p>
   <p class="note" role="note"> Canceling the <a data-link-type="dfn" href="#compositionstart" id="ref-for-compositionstart⑧"><code>compositionstart</code></a> <em>event type</em> is
			distinct from canceling the <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system⑥">text composition system</a> itself
			(e.g., by hitting a cancel button or closing an <a data-link-type="dfn" href="#ime" id="ref-for-ime①">IME</a> window). </p>
   <p class="note" role="note"> Some IMEs do not support cancelling an in-progress composition
			session (e.g., such as GTK which doesn’t presently have such an
			API). In these cases, calling <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault②">preventDefault()</a></code> will not
			stop this event’s default action. </p>
   <h4 class="heading settled" data-level="3.7.2" id="event-type-compositionupdate"><span class="secno">3.7.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compositionupdate">compositionupdate</dfn></span><a class="self-link" href="#event-type-compositionupdate"></a></h4>
   <table class="event-definition">
    <tbody>
     <tr>
      <th>Type
      <td><strong><code>compositionupdate</code></strong>
     <tr>
      <th>Interface
      <td><code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent⑥">CompositionEvent</a></code>
     <tr>
      <th>Sync / Async
      <td>Sync
     <tr>
      <th>Bubbles
      <td>Yes
     <tr>
      <th>Trusted Targets
      <td><code>Element</code>
     <tr>
      <th>Cancelable
      <td>No
     <tr>
      <th>Composed
      <td>Yes
     <tr>
      <th>Default action
      <td>None
     <tr>
      <th>Context<br> (trusted events)
      <td>
       <ul>
        <li><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code>.<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target①">target</a></code> : focused element processing the composition, <code>null</code> if not accessible
        <li><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#uievent" id="ref-for-uievent③">UIEvent</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-uievent-view" id="ref-for-dom-uievent-view①">view</a></code> : <a data-link-type="dfn" href="#window" id="ref-for-window①"><code>Window</code></a>
        <li><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#uievent" id="ref-for-uievent④">UIEvent</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-uievent-detail" id="ref-for-dom-uievent-detail①">detail</a></code> : <code>0</code>
        <li><code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent⑦">CompositionEvent</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data⑥">data</a></code> : the string comprising the current results of the composition session, which MAY be the <a data-link-type="dfn" href="#empty-string" id="ref-for-empty-string④">empty string</a> if the content has been deleted
       </ul>
   </table>
   <p>A <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent②">user agent</a> SHOULD dispatch this event during a composition
			session when a <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system⑦">text composition system</a> updates its active
			text passage with a new character, which is reflected in the string
			in <code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data⑦">data</a></code>.</p>
   <p>In <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system⑧">text composition systems</a> which keep the ongoing
			composition in sync with the input control, the <a data-link-type="dfn" href="#compositionupdate" id="ref-for-compositionupdate⑨"><code>compositionupdate</code></a> event MUST be dispatched before the control
			is updated.</p>
   <p>Some <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system⑨">text composition systems</a> might not expose this
			information to the DOM, in which case this event will not fire
			during the composition process.</p>
   <p>If the composition session is canceled, this event will be fired
			immediately before the <a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend⑧"><code>compositionend</code></a> event, and the <code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data⑧">data</a></code> attribute will be set to the <a data-link-type="dfn" href="#empty-string" id="ref-for-empty-string⑤">empty
			string</a>.</p>
   <h4 class="heading settled" data-level="3.7.3" id="event-type-compositionend"><span class="secno">3.7.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="compositionend">compositionend</dfn></span><a class="self-link" href="#event-type-compositionend"></a></h4>
   <table class="event-definition">
    <tbody>
     <tr>
      <th>Type
      <td><strong><code>compositionend</code></strong>
     <tr>
      <th>Interface
      <td><code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent⑧">CompositionEvent</a></code>
     <tr>
      <th>Sync / Async
      <td>Sync
     <tr>
      <th>Bubbles
      <td>Yes
     <tr>
      <th>Trusted Targets
      <td><code>Element</code>
     <tr>
      <th>Cancelable
      <td>No
     <tr>
      <th>Composed
      <td>Yes
     <tr>
      <th>Default action
      <td>None
     <tr>
      <th>Context<br> (trusted events)
      <td>
       <ul>
        <li><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event②">Event</a></code>.<code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target②">target</a></code> : focused element processing the composition
        <li><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#uievent" id="ref-for-uievent⑤">UIEvent</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-uievent-view" id="ref-for-dom-uievent-view②">view</a></code> : <a data-link-type="dfn" href="#window" id="ref-for-window②"><code>Window</code></a>
        <li><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#uievent" id="ref-for-uievent⑥">UIEvent</a></code>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-uievent-detail" id="ref-for-dom-uievent-detail②">detail</a></code> : <code>0</code>
        <li><code class="idl"><a data-link-type="idl" href="#compositionevent" id="ref-for-compositionevent⑨">CompositionEvent</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data⑨">data</a></code> : the string comprising the final result of the composition session, which MAY be the <a data-link-type="dfn" href="#empty-string" id="ref-for-empty-string⑥">empty string</a> if the content has been deleted or if the composition process has been canceled
       </ul>
   </table>
   <p>A <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent③">user agent</a> MUST dispatch this event when a <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system①⓪">text
			composition system</a> completes or cancels the current composition
			session, and the <a data-link-type="dfn" href="#compositionend" id="ref-for-compositionend⑨"><code>compositionend</code></a> event MUST be dispatched
			after the control is updated.</p>
   <p>This event is dispatched immediately after the <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system①①">text composition
			system</a> completes the composition session (e.g., the <a data-link-type="dfn" href="#ime" id="ref-for-ime②">IME</a> is closed, minimized, switched out of focus, or otherwise dismissed,
			and the focus switched back to the <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent④">user agent</a>).</p>
   <h2 class="heading settled" data-level="4" id="legacy-event-initializers"><span class="secno">4. </span><span class="content">Legacy Event Initializers</span><a class="self-link" href="#legacy-event-initializers"></a></h2>
   <p><em>This section is normative.</em></p>
   <p>The following features are obsolete and should only be implemented by <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent⑤">user agents</a> that require compatibility with legacy software.</p>
   <p>Early versions of this specification included an initialization method on
	the interface (for example <code>initMouseEvent</code>) that required a long
	list of parameters that, in most cases, did not fully initialize all
	attributes of the event object. Because of this, event interfaces which were
	derived from the basic <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event③">Event</a></code> interface required that the initializer of <em>each</em> of the derived interfaces be called explicitly in order to
	fully initialize an event.</p>
   <div class="example" id="example-026f8234"><a class="self-link" href="#example-026f8234"></a> Initializing all the attributes of a MutationEvent requires calls to two
	initializer methods: <code>initEvent</code> and <code>initMutationEvent</code>. </div>
   <p>Due in part to the length of time in the development of this standard, some
	implementations MAY have taken a dependency on these (now deprecated)
	initializer methods. For completeness, these legacy event initializers are
	described in this section.</p>
   <h3 class="heading settled" data-level="4.1" id="idl-interface-CompositionEvent-initializers"><span class="secno">4.1. </span><span class="content">Initializers for interface CompositionEvent</span><a class="self-link" href="#idl-interface-CompositionEvent-initializers"></a></h3>
   <p><em>This section is informative</em></p>
   <p class="note" role="note"> The argument list to this legacy CompositionEvent initializer does not
		include the <code>detailArg</code> (present in other initializers) and
		adds the <code>locale</code> argument (see <a href="#changes-drafts">§ 7.3.1 Changes between different drafts of UI Events</a>); it is
		necessary to preserve this inconsistency for compatibility with existing
		implementations. </p>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#compositionevent" id="ref-for-compositionevent①⓪"><c- g>CompositionEvent</c-></a> {
  // Originally introduced (and deprecated) in this specification
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-compositionevent-initcompositionevent" id="ref-for-dom-compositionevent-initcompositionevent"><c- g>initCompositionEvent</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg, dataArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg), CompositionEvent/initCompositionEvent(typeArg)" data-dfn-type="argument" data-export id="dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-typearg"><code><c- g>typeArg</c-></code><a class="self-link" href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-typearg"></a></dfn>,
    <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="idl-code" data-dfn-for="CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg, dataArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg), CompositionEvent/initCompositionEvent(typeArg)" data-dfn-type="argument" data-export id="dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-bubblesarg"><code><c- g>bubblesArg</c-></code><a class="self-link" href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-bubblesarg"></a></dfn> = <c- b>false</c->,
    <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="idl-code" data-dfn-for="CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg, dataArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg), CompositionEvent/initCompositionEvent(typeArg)" data-dfn-type="argument" data-export id="dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-cancelablearg"><code><c- g>cancelableArg</c-></code><a class="self-link" href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-cancelablearg"></a></dfn> = <c- b>false</c->,
    <c- b>optional</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy" id="ref-for-windowproxy"><c- n>WindowProxy</c-></a>? <dfn class="idl-code" data-dfn-for="CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg, dataArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg), CompositionEvent/initCompositionEvent(typeArg)" data-dfn-type="argument" data-export id="dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-viewarg"><code><c- g>viewArg</c-></code><a class="self-link" href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-viewarg"></a></dfn> = <c- b>null</c->,
    <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg, dataArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg, cancelableArg), CompositionEvent/initCompositionEvent(typeArg, bubblesArg), CompositionEvent/initCompositionEvent(typeArg)" data-dfn-type="argument" data-export id="dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-dataarg"><code><c- g>dataArg</c-></code><a class="self-link" href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-dataarg"></a></dfn> = "");
};
</pre>
   <dl>
    <dt><dfn class="dfn-paneled idl-code" data-dfn-for="CompositionEvent" data-dfn-type="method" data-export data-lt="initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg, dataArg)|initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg)|initCompositionEvent(typeArg, bubblesArg, cancelableArg)|initCompositionEvent(typeArg, bubblesArg)|initCompositionEvent(typeArg)" id="dom-compositionevent-initcompositionevent"><code>initCompositionEvent(typeArg)</code></dfn>
    <dd>
      Initializes attributes of a <code>CompositionEvent</code> object. This method has the same behavior as <code>UIEvent.initUIEvent()</code>. The value of <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-uievent-detail" id="ref-for-dom-uievent-detail③">detail</a></code> remains undefined. 
     <p class="warning"> The <code>initCompositionEvent</code> method is deprecated. </p>
     <dl class="parameters">
      <dt>DOMString typeArg
      <dd> Refer to the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-initevent" id="ref-for-dom-event-initevent">initEvent()</a></code> method for a description of this parameter. 
      <dt>boolean bubblesArg
      <dd> Refer to the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-initevent" id="ref-for-dom-event-initevent①">initEvent()</a></code> method for a description of this parameter. 
      <dt>boolean cancelableArg
      <dd> Refer to the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-initevent" id="ref-for-dom-event-initevent②">initEvent()</a></code> method for a description of this parameter. 
      <dt>Window? viewArg
      <dd> Specifies <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-uievent-view" id="ref-for-dom-uievent-view③">view</a></code>. This value MAY be <code>null</code>. 
      <dt>DOMString dataArg
      <dd> Specifies <code class="idl"><a data-link-type="idl" href="#dom-compositionevent-data" id="ref-for-dom-compositionevent-data①⓪">data</a></code>. 
     </dl>
   </dl>
   <h2 class="heading settled" data-level="5" id="security-considerations"><span class="secno">5. </span><span class="content">Security Considerations</span><a class="self-link" href="#security-considerations"></a></h2>
   <p>TODO - Add specific concerns for this spec</p>
   <h2 class="heading settled" data-level="6" id="acknowledgements-contributors"><span class="secno">6. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements-contributors"></a></h2>
   <p>TODO</p>
   <h2 class="heading settled" data-level="7" id="other-uievents"><span class="secno">7. </span><span class="content">Refs to other UIEvent specs [DELETE]</span><a class="self-link" href="#other-uievents"></a></h2>
   <p>This section will be deleted.</p>
   <p>Temporary place to "define" other referenced UI Events (to make the bikeshed linker happy).
	This will be deleted once we have proper cross-references.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="beforeinput">beforeinput</dfn> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="keydown">keydown</dfn> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="keyup">keyup</dfn> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="input">input</dfn></p>
   <h3 class="heading settled" data-level="7.1" id="things"><span class="secno">7.1. </span><span class="content">Things defined in other sections</span><a class="self-link" href="#things"></a></h3>
   <h4 class="heading settled" data-level="7.1.1" id="event-flow-activation"><span class="secno">7.1.1. </span><span class="content">Activation triggers and behavior</span><a class="self-link" href="#event-flow-activation"></a></h4>
   <h4 class="heading settled" data-level="7.1.2" id="event-flow-default-cancel"><span class="secno">7.1.2. </span><span class="content">Default actions and cancelable events</span><a class="self-link" href="#event-flow-default-cancel"></a></h4>
   <h4 class="heading settled" data-level="7.1.3" id="event-flow"><span class="secno">7.1.3. </span><span class="content">Event dispatch and DOM event flow</span><a class="self-link" href="#event-flow"></a></h4>
   <h4 class="heading settled" data-level="7.1.4" id="conf-interactive-ua"><span class="secno">7.1.4. </span><span class="content">Web browsers and other dynamic or interactive <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent⑥">user agents</a></span><a class="self-link" href="#conf-interactive-ua"></a></h4>
   <h4 class="heading settled" data-level="7.1.5" id="conf-author-tools"><span class="secno">7.1.5. </span><span class="content">Authoring tools</span><a class="self-link" href="#conf-author-tools"></a></h4>
   <h3 class="heading settled" data-level="7.2" id="keyboardevent-things"><span class="secno">7.2. </span><span class="content">Things defined in KeyboardEvents</span><a class="self-link" href="#keyboardevent-things"></a></h3>
   <h4 class="heading settled" data-level="7.2.1" id="keys"><span class="secno">7.2.1. </span><span class="content">Keyboard events and key values</span><a class="self-link" href="#keys"></a></h4>
   <h4 class="heading settled" data-level="7.2.2" id="keys-IME"><span class="secno">7.2.2. </span><span class="content">Input Method Editors</span><a class="self-link" href="#keys-IME"></a></h4>
   <h4 class="heading settled" data-level="7.2.3" id="key-legends"><span class="secno">7.2.3. </span><span class="content">Key Legends</span><a class="self-link" href="#key-legends"></a></h4>
   <h3 class="heading settled" data-level="7.3" id="changes-things"><span class="secno">7.3. </span><span class="content">Things defined in Changes</span><a class="self-link" href="#changes-things"></a></h3>
   <h4 class="heading settled" data-level="7.3.1" id="changes-drafts"><span class="secno">7.3.1. </span><span class="content">Changes between different drafts of UI Events</span><a class="self-link" href="#changes-drafts"></a></h4>
   <h2 class="heading settled" data-level="8" id="glossary"><span class="secno">8. </span><span class="content">Glossary [DELETE]</span><a class="self-link" href="#glossary"></a></h2>
   <p>This section will be deleted.</p>
   <p>Temporary glossary terms (for bikeshed linker).
Many of these are properly defined elsewhere and should be linked to directly.
Terms which should be defined in this spec should be defined inline.</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="activation-behavior">activation behavior</dfn>
    <dd data-md>
     <p>The action taken when an <a data-link-type="dfn" href="#event" id="ref-for-event④">event</a>, typically initiated by users through
an input device, causes an element to fulfill a defined task.  The task MAY
be defined for that element by the <a data-link-type="dfn" href="#host-language" id="ref-for-host-language">host language</a>, or by
author-defined variables, or both.  The default task for any given element
MAY be a generic action, or MAY be unique to that element.  For example, the
activation behavior of an HTML or SVG <code>&lt;a></code> element is to
cause the <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent⑦">user agent</a> to traverse the link specified in the <code>href</code> attribute, with the further optional parameter of
specifying the browsing context for the traversal (such as the current
window or tab, a named window, or a new window). The activation behavior of
an HTML <code>&lt;input></code> element with the <code>type</code> attribute value <code>submit</code> is be to send the values of the form
elements to an author-defined IRI by the author-defined HTTP method.  See <a href="#event-flow-activation">§ 7.1.1 Activation triggers and behavior</a> for more details.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="activation-trigger">activation trigger</dfn>
    <dd data-md>
     <p>An event which is defined to initiate an <a data-link-type="dfn" href="#activation-behavior" id="ref-for-activation-behavior">activation behavior</a>.  Refer
to <a href="#event-flow-activation">§ 7.1.1 Activation triggers and behavior</a> for more details.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="default-action">default action</dfn>
    <dd data-md>
     <p>A <a data-link-type="dfn" href="#default-action" id="ref-for-default-action②">default action</a> is an OPTIONAL supplementary behavior that an
implementation MUST perform in combination with the dispatch of the event
object.  Each event type definition, and each specification, defines the <a data-link-type="dfn" href="#default-action" id="ref-for-default-action③">default action</a> for that event type, if it has one.  An instance of an
event MAY have more than one <a data-link-type="dfn" href="#default-action" id="ref-for-default-action④">default action</a> under some circumstances,
such as when associated with an <a data-link-type="dfn" href="#activation-trigger" id="ref-for-activation-trigger">activation trigger</a>.  A <a data-link-type="dfn" href="#default-action" id="ref-for-default-action⑤">default
action</a> MAY be cancelled through the invocation of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault③">preventDefault()</a></code> method. For more details, see <a href="#event-flow-default-cancel">§ 7.1.2 Default actions and cancelable events</a>.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="empty-string">empty string</dfn>
    <dd data-md>
     <p>The empty string is a value of type <code>DOMString</code> of length <code>0</code>, i.e., a string which contains no characters (neither
printing nor control characters).</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event">event</dfn>
    <dd data-md>
     <p>An event is the representation of some occurrence (such as a mouse click on
the presentation of an element, the removal of child node from an element,
or any number of other possibilities) which is associated with its <a data-link-type="dfn" href="#event-target" id="ref-for-event-target">event
target</a>. Each event is an instantiation of one specific <a data-link-type="dfn" href="https://w3c.github.io/webdriver-bidi/#event-event-type" id="ref-for-event-event-type">event
type</a>.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event-target">event target</dfn>
    <dd data-md>
     <p>The object to which an <a data-link-type="dfn" href="#event" id="ref-for-event⑤">event</a> is targeted using the <a href="#event-flow">§ 7.1.3 Event dispatch and DOM event flow</a>.
The event target is the value of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target③">target</a></code> attribute.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="host-language">host language</dfn>
    <dd data-md>
     <p>Any language which integrates the features of another language or API
specification, while normatively referencing the origin specification rather
than redefining those features, and extending those features only in ways
defined by the origin specification.  An origin specification typically is
only intended to be implemented in the context of one or more host
languages, not as a standalone language.  For example, XHTML, HTML, and SVG
are host languages for UI Events, and they integrate and extend the objects
and models defined in this specification.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="ime">IME</dfn>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="input-method-editor">input method editor</dfn>
    <dd data-md>
     <p>An <em>input method editor</em> (IME), also known as a <em>front end
processor</em>, is an application that performs the conversion between
keystrokes and ideographs or other characters, usually by user-guided
dictionary lookup, often used in East Asian languages (e.g., Chinese,
Japanese, Korean).  An <a data-link-type="dfn" href="#ime" id="ref-for-ime③">IME</a> MAY also be used for dictionary-based word
completion, such as on mobile devices.  See <a href="#keys-IME">§ 7.2.2 Input Method Editors</a> for treatment of
IMEs in this specification.  See also <a data-link-type="dfn" href="#text-composition-system" id="ref-for-text-composition-system①②">text composition system</a>.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="text-composition-system">text composition system</dfn>
    <dd data-md>
     <p>A software component that interprets some form of alternate input (such as a <a data-link-type="dfn" href="#input-method-editor" id="ref-for-input-method-editor">input method editor</a>, a speech processor, or a handwriting recognition
system) and converts it to text.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="un-initialized-value">un-initialized value</dfn>
    <dd data-md>
     <p>The value of any event attribute (such as <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-bubbles" id="ref-for-dom-event-bubbles">bubbles</a></code> or <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-currenttarget" id="ref-for-dom-event-currenttarget">currentTarget</a></code>) before the event has been initialized with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-initevent" id="ref-for-dom-event-initevent③">initEvent()</a></code>. The un-initialized values of an event apply
immediately after a new event has been created using the method <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-createevent" id="ref-for-dom-document-createevent">createEvent()</a></code>.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="user-agent">user agent</dfn>
    <dd data-md>
     <p>A program, such as a browser or content authoring tool, normally running on
a client machine, which acts on a user’s behalf in retrieving, interpreting,
executing, presenting, or creating content.  Users MAY act on the content
using different user agents at different times, for different purposes.  See
the <a href="#conf-interactive-ua">§ 7.1.4 Web browsers and other dynamic or interactive user agents</a> and <a href="#conf-author-tools">§ 7.1.5 Authoring tools</a> for details on the
requirements for a <em>conforming</em> user agent.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="window">Window</dfn>
    <dd data-md>
     <p>The <code>Window</code> is the object referred to by the current <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document" id="ref-for-concept-document">document</a>’s
browsing context’s Window Proxy object as defined in <a href="http://dev.w3.org/html5/spec/single-page.html#windowproxy" title="HTML5 WindowProxy description">HTML5</a> <a data-link-type="biblio" href="#biblio-html5" title="HTML5">[HTML5]</a>.</p>
   </dl>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <section>
    <h3 class="no-ref no-num heading settled" id="w3c-conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#w3c-conformant-algorithms"></a></h3>
    <p>Requirements phrased in the imperative as part of algorithms
    (such as "strip any leading space characters"
    or "return false and abort these steps")
    are to be interpreted with the meaning of the key word
    ("must", "should", "may", etc)
    used in introducing the algorithm. </p>
    <p>Conformance requirements phrased as algorithms or specific steps
    can be implemented in any manner,
    so long as the end result is equivalent.
    In particular, the algorithms defined in this specification
    are intended to be easy to understand
    and are not intended to be performant.
    Implementers are encouraged to optimize. </p>
   </section>
  </div>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#activation-behavior">activation behavior</a><span>, in § 8</span>
   <li><a href="#activation-trigger">activation trigger</a><span>, in § 8</span>
   <li><a href="#beforeinput">beforeinput</a><span>, in § 7</span>
   <li><a href="#compositionend">compositionend</a><span>, in § 3.7.3</span>
   <li><a href="#compositionevent">CompositionEvent</a><span>, in § 3.1.1</span>
   <li><a href="#dictdef-compositioneventinit">CompositionEventInit</a><span>, in § 3.1.2</span>
   <li><a href="#dom-compositionevent-compositionevent">CompositionEvent(type)</a><span>, in § 3.1.1</span>
   <li><a href="#dom-compositionevent-compositionevent">CompositionEvent(type, eventInitDict)</a><span>, in § 3.1.1</span>
   <li><a href="#compositionstart">compositionstart</a><span>, in § 3.7.1</span>
   <li><a href="#compositionupdate">compositionupdate</a><span>, in § 3.7.2</span>
   <li><a href="#dom-compositionevent-compositionevent">constructor(type)</a><span>, in § 3.1.1</span>
   <li><a href="#dom-compositionevent-compositionevent">constructor(type, eventInitDict)</a><span>, in § 3.1.1</span>
   <li>
    data
    <ul>
     <li><a href="#dom-compositionevent-data">attribute for CompositionEvent</a><span>, in § 3.1.1</span>
     <li><a href="#dom-compositioneventinit-data">dict-member for CompositionEventInit</a><span>, in § 3.1.2</span>
    </ul>
   <li><a href="#default-action">default action</a><span>, in § 8</span>
   <li><a href="#empty-string">empty string</a><span>, in § 8</span>
   <li><a href="#event">event</a><span>, in § 8</span>
   <li><a href="#event-target">event target</a><span>, in § 8</span>
   <li><a href="#host-language">host language</a><span>, in § 8</span>
   <li><a href="#ime">IME</a><span>, in § 8</span>
   <li><a href="#dom-compositionevent-initcompositionevent">initCompositionEvent(typeArg)</a><span>, in § 4.1</span>
   <li><a href="#dom-compositionevent-initcompositionevent">initCompositionEvent(typeArg, bubblesArg)</a><span>, in § 4.1</span>
   <li><a href="#dom-compositionevent-initcompositionevent">initCompositionEvent(typeArg, bubblesArg, cancelableArg)</a><span>, in § 4.1</span>
   <li><a href="#dom-compositionevent-initcompositionevent">initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg)</a><span>, in § 4.1</span>
   <li><a href="#dom-compositionevent-initcompositionevent">initCompositionEvent(typeArg, bubblesArg, cancelableArg, viewArg, dataArg)</a><span>, in § 4.1</span>
   <li><a href="#input">input</a><span>, in § 7</span>
   <li><a href="#input-method-editor">input method editor</a><span>, in § 8</span>
   <li><a href="#keydown">keydown</a><span>, in § 7</span>
   <li><a href="#keyup">keyup</a><span>, in § 7</span>
   <li><a href="#text-composition-system">text composition system</a><span>, in § 8</span>
   <li><a href="#un-initialized-value">un-initialized value</a><span>, in § 8</span>
   <li><a href="#user-agent">user agent</a><span>, in § 8</span>
   <li><a href="#window">Window</a><span>, in § 8</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="129bdae8">Event</span>
     <li><span class="dfn-paneled" id="0c0ceb78">bubbles</span>
     <li><span class="dfn-paneled" id="0d1c69e7">createEvent(interface)</span>
     <li><span class="dfn-paneled" id="5ca8693f">currentTarget</span>
     <li><span class="dfn-paneled" id="a973e0fe">document</span>
     <li><span class="dfn-paneled" id="e464d43e">initEvent(type)</span>
     <li><span class="dfn-paneled" id="fefe0433">preventDefault()</span>
     <li><span class="dfn-paneled" id="e8478f36">target</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="94039a0c">WindowProxy</span>
    </ul>
   <li>
    <a data-link-type="biblio">[UIEVENTS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="1fc098b2">KeyboardEvent</span>
     <li><span class="dfn-paneled" id="92000da2">UIEvent</span>
     <li><span class="dfn-paneled" id="7eb5078b">UIEventInit</span>
     <li><span class="dfn-paneled" id="31f9c308">code</span>
     <li><span class="dfn-paneled" id="6a26a5dc">detail</span>
     <li><span class="dfn-paneled" id="4b516875">isComposing</span>
     <li><span class="dfn-paneled" id="1b33fddd">key</span>
     <li><span class="dfn-paneled" id="2e0301d0">view</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBDRIVER-BIDI]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="c219e85e">event type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-uievents">[UIEVENTS]
   <dd>Gary Kacmarcik; Travis Leithead. <a href="https://w3c.github.io/uievents/"><cite>UI Events</cite></a>. URL: <a href="https://w3c.github.io/uievents/">https://w3c.github.io/uievents/</a>
   <dt id="biblio-webdriver-bidi">[WEBDRIVER-BIDI]
   <dd>WebDriver BiDi URL: <a href="https://w3c.github.io/webdriver-bidi/">https://w3c.github.io/webdriver-bidi/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-html5">[HTML5]
   <dd>Ian Hickson; et al. <a href="https://www.w3.org/html/wg/drafts/html/master/"><cite>HTML5</cite></a>. URL: <a href="https://www.w3.org/html/wg/drafts/html/master/">https://www.w3.org/html/wg/drafts/html/master/</a>
   <dt id="biblio-uax15">[UAX15]
   <dd>Ken Whistler. <a href="https://www.unicode.org/reports/tr15/tr15-53.html"><cite>Unicode Normalization Forms</cite></a>. 17 August 2022. Unicode Standard Annex #15. URL: <a href="https://www.unicode.org/reports/tr15/tr15-53.html">https://www.unicode.org/reports/tr15/tr15-53.html</a>
   <dt id="biblio-unicode">[Unicode]
   <dd><a href="https://www.unicode.org/versions/latest/"><cite>The Unicode Standard</cite></a>. URL: <a href="https://www.unicode.org/versions/latest/">https://www.unicode.org/versions/latest/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#compositionevent"><code><c- g>CompositionEvent</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/uievents/#uievent"><c- n>UIEvent</c-></a> {
  <a href="#dom-compositionevent-compositionevent"><code><c- g>constructor</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-compositionevent-compositionevent-type-eventinitdict-type"><code><c- g>type</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-compositioneventinit"><c- n>CompositionEventInit</c-></a> <a href="#dom-compositionevent-compositionevent-type-eventinitdict-eventinitdict"><code><c- g>eventInitDict</c-></code></a> = {});
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-compositionevent-data"><c- g>data</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-compositioneventinit"><code><c- g>CompositionEventInit</c-></code></a> : <a data-link-type="idl-name" href="https://w3c.github.io/uievents/#dictdef-uieventinit"><c- n>UIEventInit</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a class="idl-code" data-default="&quot;&quot;" data-link-type="dict-member" data-type="DOMString " href="#dom-compositioneventinit-data"><c- g>data</c-></a> = "";
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="#compositionevent"><c- g>CompositionEvent</c-></a> {
  // Originally introduced (and deprecated) in this specification
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-compositionevent-initcompositionevent"><c- g>initCompositionEvent</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-typearg"><code><c- g>typeArg</c-></code></a>,
    <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-bubblesarg"><code><c- g>bubblesArg</c-></code></a> = <c- b>false</c->,
    <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-cancelablearg"><code><c- g>cancelableArg</c-></code></a> = <c- b>false</c->,
    <c- b>optional</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy"><c- n>WindowProxy</c-></a>? <a href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-viewarg"><code><c- g>viewArg</c-></code></a> = <c- b>null</c->,
    <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-compositionevent-initcompositionevent-typearg-bubblesarg-cancelablearg-viewarg-dataarg-dataarg"><code><c- g>dataArg</c-></code></a> = "");
};

</pre>
<script>/* script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    function genDfnPanel({dfnID, url, dfnText, refSections, external}) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel(panelData);
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        const panelWidth = panelRect.right - panelRect.left;
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* script-dfn-panel-json */
window.dfnpanelData = {};
window.dfnpanelData['129bdae8'] = {"dfnID": "129bdae8", "url": "https://dom.spec.whatwg.org/#event", "dfnText": "Event", "refSections": [{"refs": [{"id": "ref-for-event"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-event\u2460"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-event\u2461"}], "title": "3.7.3. compositionend"}, {"refs": [{"id": "ref-for-event\u2462"}], "title": "4. Legacy Event Initializers"}], "external": true};
window.dfnpanelData['0c0ceb78'] = {"dfnID": "0c0ceb78", "url": "https://dom.spec.whatwg.org/#dom-event-bubbles", "dfnText": "bubbles", "refSections": [{"refs": [{"id": "ref-for-dom-event-bubbles"}], "title": "8. Glossary [DELETE]"}], "external": true};
window.dfnpanelData['0d1c69e7'] = {"dfnID": "0d1c69e7", "url": "https://dom.spec.whatwg.org/#dom-document-createevent", "dfnText": "createEvent(interface)", "refSections": [{"refs": [{"id": "ref-for-dom-document-createevent"}], "title": "8. Glossary [DELETE]"}], "external": true};
window.dfnpanelData['5ca8693f'] = {"dfnID": "5ca8693f", "url": "https://dom.spec.whatwg.org/#dom-event-currenttarget", "dfnText": "currentTarget", "refSections": [{"refs": [{"id": "ref-for-dom-event-currenttarget"}], "title": "8. Glossary [DELETE]"}], "external": true};
window.dfnpanelData['a973e0fe'] = {"dfnID": "a973e0fe", "url": "https://dom.spec.whatwg.org/#concept-document", "dfnText": "document", "refSections": [{"refs": [{"id": "ref-for-concept-document"}], "title": "8. Glossary [DELETE]"}], "external": true};
window.dfnpanelData['e464d43e'] = {"dfnID": "e464d43e", "url": "https://dom.spec.whatwg.org/#dom-event-initevent", "dfnText": "initEvent(type)", "refSections": [{"refs": [{"id": "ref-for-dom-event-initevent"}, {"id": "ref-for-dom-event-initevent\u2460"}, {"id": "ref-for-dom-event-initevent\u2461"}], "title": "4.1. Initializers for interface CompositionEvent"}, {"refs": [{"id": "ref-for-dom-event-initevent\u2462"}], "title": "8. Glossary [DELETE]"}], "external": true};
window.dfnpanelData['fefe0433'] = {"dfnID": "fefe0433", "url": "https://dom.spec.whatwg.org/#dom-event-preventdefault", "dfnText": "preventDefault()", "refSections": [{"refs": [{"id": "ref-for-dom-event-preventdefault"}, {"id": "ref-for-dom-event-preventdefault\u2460"}], "title": "3.4. Canceling Composition Events"}, {"refs": [{"id": "ref-for-dom-event-preventdefault\u2461"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-dom-event-preventdefault\u2462"}], "title": "8. Glossary [DELETE]"}], "external": true};
window.dfnpanelData['e8478f36'] = {"dfnID": "e8478f36", "url": "https://dom.spec.whatwg.org/#dom-event-target", "dfnText": "target", "refSections": [{"refs": [{"id": "ref-for-dom-event-target"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-dom-event-target\u2460"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-dom-event-target\u2461"}], "title": "3.7.3. compositionend"}, {"refs": [{"id": "ref-for-dom-event-target\u2462"}], "title": "8. Glossary [DELETE]"}], "external": true};
window.dfnpanelData['94039a0c'] = {"dfnID": "94039a0c", "url": "https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy", "dfnText": "WindowProxy", "refSections": [{"refs": [{"id": "ref-for-windowproxy"}], "title": "4.1. Initializers for interface CompositionEvent"}], "external": true};
window.dfnpanelData['1fc098b2'] = {"dfnID": "1fc098b2", "url": "https://w3c.github.io/uievents/#keyboardevent", "dfnText": "KeyboardEvent", "refSections": [{"refs": [{"id": "ref-for-keyboardevent"}, {"id": "ref-for-keyboardevent\u2460"}, {"id": "ref-for-keyboardevent\u2461"}], "title": "2. Stylistic Conventions"}, {"refs": [{"id": "ref-for-keyboardevent\u2462"}], "title": "3.5. Key Events During Composition"}], "external": true};
window.dfnpanelData['92000da2'] = {"dfnID": "92000da2", "url": "https://w3c.github.io/uievents/#uievent", "dfnText": "UIEvent", "refSections": [{"refs": [{"id": "ref-for-uievent"}], "title": "3.1.1. CompositionEvent"}, {"refs": [{"id": "ref-for-uievent\u2460"}, {"id": "ref-for-uievent\u2461"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-uievent\u2462"}, {"id": "ref-for-uievent\u2463"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-uievent\u2464"}, {"id": "ref-for-uievent\u2465"}], "title": "3.7.3. compositionend"}], "external": true};
window.dfnpanelData['7eb5078b'] = {"dfnID": "7eb5078b", "url": "https://w3c.github.io/uievents/#dictdef-uieventinit", "dfnText": "UIEventInit", "refSections": [{"refs": [{"id": "ref-for-dictdef-uieventinit"}], "title": "3.1.2. CompositionEventInit"}], "external": true};
window.dfnpanelData['31f9c308'] = {"dfnID": "31f9c308", "url": "https://w3c.github.io/uievents/#dom-keyboardevent-code", "dfnText": "code", "refSections": [{"refs": [{"id": "ref-for-dom-keyboardevent-code"}, {"id": "ref-for-dom-keyboardevent-code\u2460"}], "title": "2. Stylistic Conventions"}], "external": true};
window.dfnpanelData['6a26a5dc'] = {"dfnID": "6a26a5dc", "url": "https://w3c.github.io/uievents/#dom-uievent-detail", "dfnText": "detail", "refSections": [{"refs": [{"id": "ref-for-dom-uievent-detail"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-dom-uievent-detail\u2460"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-dom-uievent-detail\u2461"}], "title": "3.7.3. compositionend"}, {"refs": [{"id": "ref-for-dom-uievent-detail\u2462"}], "title": "4.1. Initializers for interface CompositionEvent"}], "external": true};
window.dfnpanelData['4b516875'] = {"dfnID": "4b516875", "url": "https://w3c.github.io/uievents/#dom-keyboardevent-iscomposing", "dfnText": "isComposing", "refSections": [{"refs": [{"id": "ref-for-dom-keyboardevent-iscomposing"}, {"id": "ref-for-dom-keyboardevent-iscomposing\u2460"}], "title": "3.5. Key Events During Composition"}], "external": true};
window.dfnpanelData['1b33fddd'] = {"dfnID": "1b33fddd", "url": "https://w3c.github.io/uievents/#dom-keyboardevent-key", "dfnText": "key", "refSections": [{"refs": [{"id": "ref-for-dom-keyboardevent-key"}, {"id": "ref-for-dom-keyboardevent-key\u2460"}], "title": "2. Stylistic Conventions"}], "external": true};
window.dfnpanelData['2e0301d0'] = {"dfnID": "2e0301d0", "url": "https://w3c.github.io/uievents/#dom-uievent-view", "dfnText": "view", "refSections": [{"refs": [{"id": "ref-for-dom-uievent-view"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-dom-uievent-view\u2460"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-dom-uievent-view\u2461"}], "title": "3.7.3. compositionend"}, {"refs": [{"id": "ref-for-dom-uievent-view\u2462"}], "title": "4.1. Initializers for interface CompositionEvent"}], "external": true};
window.dfnpanelData['c219e85e'] = {"dfnID": "c219e85e", "url": "https://w3c.github.io/webdriver-bidi/#event-event-type", "dfnText": "event type", "refSections": [{"refs": [{"id": "ref-for-event-event-type"}], "title": "8. Glossary [DELETE]"}], "external": true};
window.dfnpanelData['8855a9aa'] = {"dfnID": "8855a9aa", "url": "https://webidl.spec.whatwg.org/#idl-DOMString", "dfnText": "DOMString", "refSections": [{"refs": [{"id": "ref-for-idl-DOMString"}], "title": "3.1.1. CompositionEvent"}, {"refs": [{"id": "ref-for-idl-DOMString\u2460"}, {"id": "ref-for-idl-DOMString\u2461"}], "title": "3.1.2. CompositionEventInit"}, {"refs": [{"id": "ref-for-idl-DOMString\u2462"}, {"id": "ref-for-idl-DOMString\u2463"}], "title": "4.1. Initializers for interface CompositionEvent"}], "external": true};
window.dfnpanelData['889e932f'] = {"dfnID": "889e932f", "url": "https://webidl.spec.whatwg.org/#Exposed", "dfnText": "Exposed", "refSections": [{"refs": [{"id": "ref-for-Exposed"}], "title": "3.1.1. CompositionEvent"}], "external": true};
window.dfnpanelData['b0d7f3c3'] = {"dfnID": "b0d7f3c3", "url": "https://webidl.spec.whatwg.org/#idl-USVString", "dfnText": "USVString", "refSections": [{"refs": [{"id": "ref-for-idl-USVString"}, {"id": "ref-for-idl-USVString\u2460"}], "title": "3.1.1. CompositionEvent"}], "external": true};
window.dfnpanelData['5372cca8'] = {"dfnID": "5372cca8", "url": "https://webidl.spec.whatwg.org/#idl-boolean", "dfnText": "boolean", "refSections": [{"refs": [{"id": "ref-for-idl-boolean"}, {"id": "ref-for-idl-boolean\u2460"}], "title": "4.1. Initializers for interface CompositionEvent"}], "external": true};
window.dfnpanelData['5f90bbfb'] = {"dfnID": "5f90bbfb", "url": "https://webidl.spec.whatwg.org/#idl-undefined", "dfnText": "undefined", "refSections": [{"refs": [{"id": "ref-for-idl-undefined"}], "title": "4.1. Initializers for interface CompositionEvent"}], "external": true};
window.dfnpanelData['compositionevent'] = {"dfnID": "compositionevent", "url": "#compositionevent", "dfnText": "CompositionEvent", "refSections": [{"refs": [{"id": "ref-for-compositionevent"}, {"id": "ref-for-compositionevent\u2460"}, {"id": "ref-for-compositionevent\u2461"}], "title": "3.1. Interface CompositionEvent"}, {"refs": [{"id": "ref-for-compositionevent\u2462"}], "title": "3.3. Handwriting Recognition Systems"}, {"refs": [{"id": "ref-for-compositionevent\u2463"}, {"id": "ref-for-compositionevent\u2464"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-compositionevent\u2465"}, {"id": "ref-for-compositionevent\u2466"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-compositionevent\u2467"}, {"id": "ref-for-compositionevent\u2468"}], "title": "3.7.3. compositionend"}, {"refs": [{"id": "ref-for-compositionevent\u2460\u24ea"}], "title": "4.1. Initializers for interface CompositionEvent"}], "external": false};
window.dfnpanelData['dom-compositionevent-data'] = {"dfnID": "dom-compositionevent-data", "url": "#dom-compositionevent-data", "dfnText": "data", "refSections": [{"refs": [{"id": "ref-for-dom-compositionevent-data"}], "title": "3. Composition Events"}, {"refs": [{"id": "ref-for-dom-compositionevent-data\u2460"}], "title": "3.1.1. CompositionEvent"}, {"refs": [{"id": "ref-for-dom-compositionevent-data\u2461"}], "title": "3.3. Handwriting Recognition Systems"}, {"refs": [{"id": "ref-for-dom-compositionevent-data\u2462"}, {"id": "ref-for-dom-compositionevent-data\u2463"}, {"id": "ref-for-dom-compositionevent-data\u2464"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-dom-compositionevent-data\u2465"}, {"id": "ref-for-dom-compositionevent-data\u2466"}, {"id": "ref-for-dom-compositionevent-data\u2467"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-dom-compositionevent-data\u2468"}], "title": "3.7.3. compositionend"}, {"refs": [{"id": "ref-for-dom-compositionevent-data\u2460\u24ea"}], "title": "4.1. Initializers for interface CompositionEvent"}], "external": false};
window.dfnpanelData['dictdef-compositioneventinit'] = {"dfnID": "dictdef-compositioneventinit", "url": "#dictdef-compositioneventinit", "dfnText": "CompositionEventInit", "refSections": [{"refs": [{"id": "ref-for-dictdef-compositioneventinit"}], "title": "3.1. Interface CompositionEvent"}, {"refs": [{"id": "ref-for-dictdef-compositioneventinit\u2460"}], "title": "3.1.1. CompositionEvent"}], "external": false};
window.dfnpanelData['dom-compositioneventinit-data'] = {"dfnID": "dom-compositioneventinit-data", "url": "#dom-compositioneventinit-data", "dfnText": "data", "refSections": [{"refs": [{"id": "ref-for-dom-compositioneventinit-data"}], "title": "3.1.2. CompositionEventInit"}], "external": false};
window.dfnpanelData['compositionstart'] = {"dfnID": "compositionstart", "url": "#compositionstart", "dfnText": "compositionstart", "refSections": [{"refs": [{"id": "ref-for-compositionstart"}, {"id": "ref-for-compositionstart\u2460"}], "title": "3. Composition Events"}, {"refs": [{"id": "ref-for-compositionstart\u2461"}], "title": "3.2. Composition Event Order"}, {"refs": [{"id": "ref-for-compositionstart\u2462"}], "title": "3.3. Handwriting Recognition Systems"}, {"refs": [{"id": "ref-for-compositionstart\u2463"}, {"id": "ref-for-compositionstart\u2464"}], "title": "3.4. Canceling Composition Events"}, {"refs": [{"id": "ref-for-compositionstart\u2465"}], "title": "3.5. Key Events During Composition"}, {"refs": [{"id": "ref-for-compositionstart\u2466"}, {"id": "ref-for-compositionstart\u2467"}], "title": "3.7.1. compositionstart"}], "external": false};
window.dfnpanelData['compositionupdate'] = {"dfnID": "compositionupdate", "url": "#compositionupdate", "dfnText": "compositionupdate", "refSections": [{"refs": [{"id": "ref-for-compositionupdate"}], "title": "3. Composition Events"}, {"refs": [{"id": "ref-for-compositionupdate\u2460"}], "title": "3.2. Composition Event Order"}, {"refs": [{"id": "ref-for-compositionupdate\u2461"}, {"id": "ref-for-compositionupdate\u2462"}], "title": "3.3. Handwriting Recognition Systems"}, {"refs": [{"id": "ref-for-compositionupdate\u2463"}], "title": "3.5. Key Events During Composition"}, {"refs": [{"id": "ref-for-compositionupdate\u2464"}, {"id": "ref-for-compositionupdate\u2465"}, {"id": "ref-for-compositionupdate\u2466"}, {"id": "ref-for-compositionupdate\u2467"}], "title": "3.6. Input Events During Composition"}, {"refs": [{"id": "ref-for-compositionupdate\u2468"}], "title": "3.7.2. compositionupdate"}], "external": false};
window.dfnpanelData['compositionend'] = {"dfnID": "compositionend", "url": "#compositionend", "dfnText": "compositionend", "refSections": [{"refs": [{"id": "ref-for-compositionend"}], "title": "3. Composition Events"}, {"refs": [{"id": "ref-for-compositionend\u2460"}], "title": "3.2. Composition Event Order"}, {"refs": [{"id": "ref-for-compositionend\u2461"}], "title": "3.3. Handwriting Recognition Systems"}, {"refs": [{"id": "ref-for-compositionend\u2462"}, {"id": "ref-for-compositionend\u2463"}], "title": "3.4. Canceling Composition Events"}, {"refs": [{"id": "ref-for-compositionend\u2464"}], "title": "3.5. Key Events During Composition"}, {"refs": [{"id": "ref-for-compositionend\u2465"}, {"id": "ref-for-compositionend\u2466"}], "title": "3.6. Input Events During Composition"}, {"refs": [{"id": "ref-for-compositionend\u2467"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-compositionend\u2468"}], "title": "3.7.3. compositionend"}], "external": false};
window.dfnpanelData['dom-compositionevent-initcompositionevent'] = {"dfnID": "dom-compositionevent-initcompositionevent", "url": "#dom-compositionevent-initcompositionevent", "dfnText": "initCompositionEvent(typeArg)", "refSections": [{"refs": [{"id": "ref-for-dom-compositionevent-initcompositionevent"}], "title": "4.1. Initializers for interface CompositionEvent"}], "external": false};
window.dfnpanelData['beforeinput'] = {"dfnID": "beforeinput", "url": "#beforeinput", "dfnText": "beforeinput", "refSections": [{"refs": [{"id": "ref-for-beforeinput"}, {"id": "ref-for-beforeinput\u2460"}, {"id": "ref-for-beforeinput\u2461"}, {"id": "ref-for-beforeinput\u2462"}, {"id": "ref-for-beforeinput\u2463"}], "title": "3.6. Input Events During Composition"}], "external": false};
window.dfnpanelData['keydown'] = {"dfnID": "keydown", "url": "#keydown", "dfnText": "keydown", "refSections": [{"refs": [{"id": "ref-for-keydown"}, {"id": "ref-for-keydown\u2460"}, {"id": "ref-for-keydown\u2461"}, {"id": "ref-for-keydown\u2462"}], "title": "3.4. Canceling Composition Events"}, {"refs": [{"id": "ref-for-keydown\u2463"}, {"id": "ref-for-keydown\u2464"}, {"id": "ref-for-keydown\u2465"}], "title": "3.5. Key Events During Composition"}, {"refs": [{"id": "ref-for-keydown\u2466"}], "title": "3.7.1. compositionstart"}], "external": false};
window.dfnpanelData['keyup'] = {"dfnID": "keyup", "url": "#keyup", "dfnText": "keyup", "refSections": [{"refs": [{"id": "ref-for-keyup"}, {"id": "ref-for-keyup\u2460"}], "title": "3.4. Canceling Composition Events"}, {"refs": [{"id": "ref-for-keyup\u2461"}, {"id": "ref-for-keyup\u2462"}, {"id": "ref-for-keyup\u2463"}], "title": "3.5. Key Events During Composition"}], "external": false};
window.dfnpanelData['input'] = {"dfnID": "input", "url": "#input", "dfnText": "input", "refSections": [{"refs": [{"id": "ref-for-input"}, {"id": "ref-for-input\u2460"}, {"id": "ref-for-input\u2461"}, {"id": "ref-for-input\u2462"}, {"id": "ref-for-input\u2463"}, {"id": "ref-for-input\u2464"}], "title": "3.6. Input Events During Composition"}], "external": false};
window.dfnpanelData['activation-behavior'] = {"dfnID": "activation-behavior", "url": "#activation-behavior", "dfnText": "activation behavior", "refSections": [{"refs": [{"id": "ref-for-activation-behavior"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['activation-trigger'] = {"dfnID": "activation-trigger", "url": "#activation-trigger", "dfnText": "activation trigger", "refSections": [{"refs": [{"id": "ref-for-activation-trigger"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['default-action'] = {"dfnID": "default-action", "url": "#default-action", "dfnText": "default action", "refSections": [{"refs": [{"id": "ref-for-default-action"}, {"id": "ref-for-default-action\u2460"}], "title": "3.4. Canceling Composition Events"}, {"refs": [{"id": "ref-for-default-action\u2461"}, {"id": "ref-for-default-action\u2462"}, {"id": "ref-for-default-action\u2463"}, {"id": "ref-for-default-action\u2464"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['empty-string'] = {"dfnID": "empty-string", "url": "#empty-string", "dfnText": "empty string", "refSections": [{"refs": [{"id": "ref-for-empty-string"}], "title": "3. Composition Events"}, {"refs": [{"id": "ref-for-empty-string\u2460"}], "title": "3.1.1. CompositionEvent"}, {"refs": [{"id": "ref-for-empty-string\u2461"}, {"id": "ref-for-empty-string\u2462"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-empty-string\u2463"}, {"id": "ref-for-empty-string\u2464"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-empty-string\u2465"}], "title": "3.7.3. compositionend"}], "external": false};
window.dfnpanelData['event'] = {"dfnID": "event", "url": "#event", "dfnText": "event", "refSections": [{"refs": [{"id": "ref-for-event\u2463"}, {"id": "ref-for-event\u2464"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['event-target'] = {"dfnID": "event-target", "url": "#event-target", "dfnText": "event target", "refSections": [{"refs": [{"id": "ref-for-event-target"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['host-language'] = {"dfnID": "host-language", "url": "#host-language", "dfnText": "host language", "refSections": [{"refs": [{"id": "ref-for-host-language"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['ime'] = {"dfnID": "ime", "url": "#ime", "dfnText": "IME", "refSections": [{"refs": [{"id": "ref-for-ime"}], "title": "3. Composition Events"}, {"refs": [{"id": "ref-for-ime\u2460"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-ime\u2461"}], "title": "3.7.3. compositionend"}, {"refs": [{"id": "ref-for-ime\u2462"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['input-method-editor'] = {"dfnID": "input-method-editor", "url": "#input-method-editor", "dfnText": "input method editor", "refSections": [{"refs": [{"id": "ref-for-input-method-editor"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['text-composition-system'] = {"dfnID": "text-composition-system", "url": "#text-composition-system", "dfnText": "text composition system", "refSections": [{"refs": [{"id": "ref-for-text-composition-system"}, {"id": "ref-for-text-composition-system\u2460"}, {"id": "ref-for-text-composition-system\u2461"}, {"id": "ref-for-text-composition-system\u2462"}, {"id": "ref-for-text-composition-system\u2463"}, {"id": "ref-for-text-composition-system\u2464"}, {"id": "ref-for-text-composition-system\u2465"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-text-composition-system\u2466"}, {"id": "ref-for-text-composition-system\u2467"}, {"id": "ref-for-text-composition-system\u2468"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-text-composition-system\u2460\u24ea"}, {"id": "ref-for-text-composition-system\u2460\u2460"}], "title": "3.7.3. compositionend"}, {"refs": [{"id": "ref-for-text-composition-system\u2460\u2461"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['un-initialized-value'] = {"dfnID": "un-initialized-value", "url": "#un-initialized-value", "dfnText": "un-initialized value", "refSections": [{"refs": [{"id": "ref-for-un-initialized-value"}], "title": "3.1.1. CompositionEvent"}], "external": false};
window.dfnpanelData['user-agent'] = {"dfnID": "user-agent", "url": "#user-agent", "dfnText": "user agent", "refSections": [{"refs": [{"id": "ref-for-user-agent"}], "title": "2. Stylistic Conventions"}, {"refs": [{"id": "ref-for-user-agent\u2460"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-user-agent\u2461"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-user-agent\u2462"}, {"id": "ref-for-user-agent\u2463"}], "title": "3.7.3. compositionend"}, {"refs": [{"id": "ref-for-user-agent\u2464"}], "title": "4. Legacy Event Initializers"}, {"refs": [{"id": "ref-for-user-agent\u2465"}], "title": "7.1.4. Web browsers and other dynamic or interactive user agents"}, {"refs": [{"id": "ref-for-user-agent\u2466"}], "title": "8. Glossary [DELETE]"}], "external": false};
window.dfnpanelData['window'] = {"dfnID": "window", "url": "#window", "dfnText": "Window", "refSections": [{"refs": [{"id": "ref-for-window"}], "title": "3.7.1. compositionstart"}, {"refs": [{"id": "ref-for-window\u2460"}], "title": "3.7.2. compositionupdate"}, {"refs": [{"id": "ref-for-window\u2461"}], "title": "3.7.3. compositionend"}], "external": false};</script>
<script>/* script-dom-helper */
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>